import{r as t,j as _}from"./index-5b7e78c2.js";import{A as T}from"./constants-a400ef56.js";const A={columns:{pending:{id:"pending",title:"Pending",taskIDs:["2"]},in_progress:{id:"in_progress",title:"In progress",taskIDs:["1"]},done:{id:"done",title:"Done",taskIDs:[]}},tasks:{1:{id:1,title:"Sample Task",description:"Sample description about the task which is to be completed",dueDate:"",state:"in_progress",assignee:void 0,assignedUserName:void 0},2:{id:2,title:"Another Sample Task",description:"Sample description about the task which is to be completed",dueDate:"",state:"pending",assignee:void 0,assignedUserName:void 0}},columnOrder:["pending","in_progress","done"]};var r=(e=>(e.UPDATE_TASK_REQUEST="UPDATE_SPECIFIC_TASK_REQUEST",e.UPDATE_TASK_SUCCESS="UPDATE_SPECIFIC_TASK_SUCCESS",e.UPDATE_TASK_FAILURE="UPDATE_SPECIFIC_TASK_FAILURE",e.FETCH_TASKS_REQUEST="FETCH_ALL_TASKS_REQUEST",e.FETCH_TASKS_SUCCESS="FETCH_ALL_TASKS_SUCCESS",e.FETCH_TASKS_FAILURE="FETCH_ALL_TASKS_FAILURE",e.CREATE_TASK_REQUEST="CREATE_NEW_TASK_REQUEST",e.CREATE_TASK_SUCCESS="CREATE_NEW_TASK_SUCCESS",e.CREATE_TASK_FAILURE="CREATE_NEW_TASK_FAILURE",e.DELETE_TASKS_REQUEST="DELETE_SPECIFIC_TASKS_REQUEST",e.DELETE_TASKS_SUCCESS="DELETE_SPECIFIC_TASKS_SUCCESS",e.DELETE_TASKS_FAILURE="DELETE_SPECIFIC_TASKS_FAILURE",e.REORDER_TASKS="REORDER_TASKS",e))(r||{});const a={isError:!1,errorMessage:"",projectData:A,isLoading:!1},c=(e=a,E)=>{switch(E.type){case r.FETCH_TASKS_FAILURE:return{...e,isLoading:!1,isError:!0,errorMessage:E.payload};case r.DELETE_TASKS_REQUEST:return{...e,isLoading:!0};case r.FETCH_TASKS_REQUEST:return{...e,isLoading:!0};case r.FETCH_TASKS_SUCCESS:return{...e,isLoading:!1,projectData:E.payload};case r.DELETE_TASKS_SUCCESS:return{...e,isLoading:!1};case r.DELETE_TASKS_FAILURE:return{...e,isLoading:!1,isError:!0,errorMessage:E.payload};case r.UPDATE_TASK_SUCCESS:return{...e,isLoading:!1};case r.UPDATE_TASK_FAILURE:return{...e,isLoading:!1,isError:!0,errorMessage:E.payload};case r.UPDATE_TASK_REQUEST:return{...e,isLoading:!0};case r.CREATE_TASK_FAILURE:return{...e,isLoading:!1,isError:!0,errorMessage:E.payload};case r.CREATE_TASK_REQUEST:return{...e,isLoading:!0};case r.CREATE_TASK_SUCCESS:return{...e,isLoading:!1};default:return e}},i=t.createContext(()=>{}),C=t.createContext(a),p=()=>t.useContext(C),R=()=>t.useContext(i),u=({children:e})=>{const[E,o]=t.useReducer(c,a);return _.jsx(C.Provider,{value:E,children:_.jsx(i.Provider,{value:o,children:e})})},n=async(e,E)=>{const o=localStorage.getItem("authToken")??"";try{e({type:r.FETCH_TASKS_REQUEST});const S=await fetch(`${T}/projects/${E}/tasks`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}});if(!S.ok)throw new Error("Error While Fetching Tasks");const s=await S.json();e({type:r.FETCH_TASKS_SUCCESS,payload:s}),console.dir(s)}catch(S){console.error("Error Occured",S),e({type:r.FETCH_TASKS_FAILURE,payload:"Error While Fetching Tasks"})}},g=(e,E)=>{E({type:r.REORDER_TASKS,payload:e})},K=async(e,E,o)=>{const S=localStorage.getItem("authToken")??"";try{if(o({type:r.UPDATE_TASK_REQUEST}),!(await fetch(`${T}/projects/${e}/tasks/${E.id}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify(E)})).ok)throw new Error("Error While Updating Task");o({type:r.UPDATE_TASK_SUCCESS}),n(o,e)}catch(s){console.error("Error while updating Task",s),o({type:r.UPDATE_TASK_FAILURE,payload:"Error while updating Task"})}},l=async(e,E,o)=>{const S=localStorage.getItem("authToken")??"";try{if(o({type:r.DELETE_TASKS_REQUEST}),!(await fetch(`${T}/projects/${e}/tasks/${E.id}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify(E)})).ok)throw new Error("Error While Deleting Task");o({type:r.DELETE_TASKS_SUCCESS}),n(o,e)}catch(s){console.error("Error While Deleting Task",s),o({type:r.DELETE_TASKS_FAILURE,payload:"Error While Deleting Task"})}},y=async(e,E,o)=>{const S=localStorage.getItem("authToken")??"";try{if(o({type:r.CREATE_TASK_REQUEST}),!(await fetch(`${T}/projects/${e}/tasks/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify(E)})).ok)throw new Error("Error While Creating Task");o({type:r.CREATE_TASK_SUCCESS}),n(o,e)}catch(s){console.error("Creating Task UnSuccessful",s),o({type:r.CREATE_TASK_FAILURE,payload:"Erro While Creating Task"})}};export{u as T,R as a,K as b,n as c,l as d,y as e,g as r,p as u};
